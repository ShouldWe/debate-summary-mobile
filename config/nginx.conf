# vim: set filetype=nginx :
#
# Debate Summary Mobile - Croudsource arguments and debates
# Copyright (C) 2015 Policy Wiki Educational Foundation LTD <hello@shouldwe.org>
#
# This file is part of Debate Summary Mobile.
#
# Debate Summary Mobile is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Debate Summary Mobile is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Debate Summary Mobile.  If not, see <http://www.gnu.org/licenses/>.
#
daemon off;
error_log /dev/stdout error;

worker_processes 4;

events {
  worker_connections  1024;
}

http {

  log_format gzip '[$time_local] ' '"$request" $status $bytes_sent';
  access_log /dev/stdout;

  charset utf-8;
  default_type application/octet-stream;

  types {
    text/html                     html;
    text/plain                    txt;
    text/javascript               js;
    text/css                      css;
    image/png                     png;
    image/jpg                     jpg;
    image/svg+xml                 svg svgz;
    application/x-font-opentype   otf;
    application/vnd.ms-fontobject eot;
    application/x-font-ttf        ttf;
    application/font-woff         woff;
  }

  server {
    listen              3000;
    server_name         localhost;
    root ./public/;

    add_header "X-UA-Compatible" "IE=Edge,chrome=1";

    location / {
      #Â disable standard caching for angular assets, as they can change often
      expires -1;
      add_header Pragma "no-cache";
      add_header Cache-Control "no-store, no-cache, must-revalicate, post-check=0, pre-check=0";
      try_files $uri $uri/ /index.html =404;
    }
  }
}
